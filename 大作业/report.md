# 数据结构大作业报告







## 大作业		小蓝鲸的财务统计任务







​												**计算机科学与技术系     **



​												**181860055 		刘国涛**  



​									邮箱:181860055@smail.nju.edu.cn





​											







**2020年1月1日**					





------







## 任务一：统计多个收入区间内的平均收入

### 任务描述

> 给定n个市民的收入和m个询问区间[l~i~,r~i~]
>
> 对于每个询问区间[l~i~,r~i~]，你的程序需要计算在l~i~到r~i~范围的收入的平均值

### 复杂度要求

时间复杂度$O((n+m) log (n+2m)$以内

### 算法描述

1. 将n个市民的收入进行排序得到数组`income`
2. 计算收入的前序和数组`presum`
3. 在每次询问区间[l~i~,r~i~]时，通过二分查找分别找到区间左右端点在数组`income`中对应的下标`leftAddr`,`rightAddr`
4. 用前缀和数组计算出该区间的平均数$\frac{presum_{rightAddr}-presum_{leftAddr}}{rightAddr-leftAddr}$



**二分查找：**

- 二分查找时，数据中可能存在重复元素，在查找`leftAddr`时，若结果为重复元素，则需要返回重复元素所在区间的最左端；在查找`rightAddr`时，若结果存在重复元素，则需要返回重复元素所在区间的最右端
- 二分查找得到的区间是[`leftAddr`,`rightAddr`)
- 二分查找可能出现待查找元素`target`不是`income`数组中的元素，则返回`income[i+1],income[i]<target<income[i+1]`



**注意：**如果$rightAddr-leftAddr$则直接输出0



### 复杂度分析

- 输入：$O(n+m)$
- 对`income`排序：堆排序平均时间复杂度$O(nlog(n))$
- 计算前缀和：$O(n)$
- m次询问：一次二分查找$O(log(n))$，询问复杂度为$O(mlog(n))$
- 计算平均数：$O( 1 )$

总时间复杂度为$O((n+m)log(n))$

### 代码实现





## 任务二：实时统计收入的中位数

### 任务描述

> 对于n个市民，逐一获取每个市民的年收入。当获取第k个年收入时，统计并输出前k个年收入的中位数
>
> 注：当k为技术时，直接输出第$\frac{k+1}{2}$大的收入；当k为偶数时，输出第$\frac{k}{2}$和$\frac{k}{2}+1$大的收入的平均值(k>=1)

### 复杂度要求

时间复杂度$O(nlog(n))$以内

### 算法描述

### 复杂度分析

### 代码实现



## 任务三：实时统计当前最高的k个收入

### 任务描述

> 给定 n 个市民的年收入，以及查询参数 k，要求实时反馈出所有收入中最高的 k 个收入。收入信息按行给出，每行表示一个市民的年收入。 当该行的内容为“Check”字符串时，要求输出到上一条收入为止的所有收入中，最高的 k 个收入。如果 k 值超过了当前已经存储的收入数目，则仅需输出已有的数据。 输出在一行完成。

### 复杂度要求

时间复杂度$O(nklog(k))$以内

### 算法描述

### 复杂度分析

### 代码实现

## 任务四：查找蓝鲸市某市民

### 任务描述

> 给定所有蓝鲸市民的身份证号，共n个。市民与身份证号一一对应。身份证号总共有18位，由0~9的数字和大写字母组成。
>
> 再给一个市民的身份证号，需要判断这个市民是否属于蓝鲸市

### 复杂度要求

算法的存储空间尽量小，每次查询的平均时间复杂度尽量控制在$O(1)$

### 算法描述

### 复杂度分析

### 代码实现

## 任务五 计算收入的最大断档

### 任务描述

> 给定N个市民的年收入，要求计算工资最大断档，即对工资排序后相邻两数的差值的最大值。  

### 复杂度要求

$O(N)$

### 算法描述

### 复杂度分析

### 代码实现

